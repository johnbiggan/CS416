<!DOCTYPE html>
<meta charset="utf-8">

<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://unpkg.com/topojson-client@3"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-annotation/2.5.1/d3-annotation.min.js"></script>

<head><title>Presidential Vote</title></head>

<h1 align="center">Presidential Vote</h1>

<button onclick="update(data1,'In 1972, Richard Nixon (R) defeated George McGovern (D) in one of the largest electoral wins in history by winning 48 states.')">1972</button>
<button onclick="update(data1,1976)">1976</button>
<button onclick="update(data1,1980)">1980</button>
<button onclick="update(data1,1992)">1992</button>
<button onclick="update(data1,2000)">2000</button>
<button onclick="update(data1,2008)">2008</button>
<button onclick="update(data1,2016)">2016</button>
<button onclick="update(data1,2020)">2020</button>

<div id="divContainer">
    <div class="states_viz"></div>
    <div class="line_viz"></div>
</div>

<style>  
    #divContainer {background: white; width: 1200px; float: left;}
    .states_viz {background: white; float: left;}
    .line_viz {background: white; float: left;}
</style>

<div id="desc_viz">In 1972, Richard Nixon (R) defeated George McGovern (D) in one of the largest electoral wins in history by winning 48 states.</div>

<script>

var data1 = [1,2];

var margin = {top: 10, right: 30, bottom: 30, left: 60},
    width = 600 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;
    
var st_svg = d3.select(".states_viz")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");
    
var ln_svg = d3.select(".line_viz")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");

var pres_data = d3.csv("1976-2020-president.csv", function(d) {return d;})

console.log(pres_data);
    
d3.csv("https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/3_TwoNumOrdered_comma.csv",

  // When reading the csv, I must format variables:
  function(d){
    return { date : d3.timeParse("%Y-%m-%d")(d.date), value : d.value }
  },

  // Now I can use this dataset:
  function(data) {

    // Add X axis --> it is a date format
    var x = d3.scaleTime()
      .domain(d3.extent(data, function(d) { return d.date; }))
      .range([ 0, width ]);
    st_svg.append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x));

    // Add Y axis
    var y = d3.scaleLinear()
      .domain([0, d3.max(data, function(d) { return +d.value; })])
      .range([ height, 0 ]);
    st_svg.append("g")
      .call(d3.axisLeft(y));

    // Add the line
    st_svg.append("path")
      .datum(data)
      .attr("fill", "none")
      .attr("stroke", "steelblue")
      .attr("stroke-width", 1.5)
      .attr("d", d3.line()
        .x(function(d) { return x(d.date) })
        .y(function(d) { return y(d.value) })
        )

      // Add X axis --> it is a date format
    var x = d3.scaleTime()
      .domain(d3.extent(data, function(d) { return d.date; }))
      .range([ 0, width ]);
    ln_svg.append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x));

    // Add Y axis
    var y = d3.scaleLinear()
      .domain([0, d3.max(data, function(d) { return +d.value; })])
      .range([ height, 0 ]);
    ln_svg.append("g")
      .call(d3.axisLeft(y));

    // Add the line
    ln_svg.append("path")
      .datum(data)
      .attr("fill", "none")
      .attr("stroke", "steelblue")
      .attr("stroke-width", 1.5)
      .attr("d", d3.line()
        .x(function(d) { return x(d.date) })
        .y(function(d) { return y(d.value) })
        )

})

function update(data,year) {

    d3.select("#desc_viz")
        .text(year);
    console.log(year);
    
}
  
</script>
