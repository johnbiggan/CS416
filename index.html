<!DOCTYPE html>
<meta charset="utf-8">
<link href="style.css" rel="stylesheet" />

<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://unpkg.com/topojson-client@3"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-annotation/2.5.1/d3-annotation.min.js"></script>

<head><title>US Presidential Vote</title>

<h1 align="center">US Presidential Vote</h1>
<h2 align="center">1972-2020</h2>

<button onclick="update(0)">1972</button>
<button onclick="update(1)">1976</button>
<button onclick="update(2)">1980</button>
<button onclick="update(3)">1992</button>
<button onclick="update(4)">2000</button>
<button onclick="update(5)">2008</button>
<button onclick="update(6)">2016</button>
<button onclick="update(7)">2020</button>

</head>

<div id="container">
    <div class="states_viz"></div>
    <div class="line_viz"></div>
</div>

<div id="desc_viz"></div>

<script>

var yr_data = [
    1972,1976,1980,1992,2000,2008,2016,2020
];

var desc_data = [
    'In 1972, Richard Nixon (R) defeated George McGovern (D) in one of the largest electoral wins in history by winning 49 states, losing only Massachusettes and the District of Columbia.',
    'Following the Watergate Scandal, Democratic Presidential candidate Jimmy Carter defeated Gerald Ford (R). The native Georgian carried the South and Northeast.',
    'Ronald Reagan (D) won a landslide victory against incumbent Jimmy Carter (D). His victory was aided by economic stagflation and the Iran Hostage Crisis.',
    'Following 12 years of Republican Presidents, Bill Clinton (D) defeated the supposedley undefeatable incumbent George H.W. Bush. An economic downturn and rising crime rate, along with the strong showing by third-party challenger Ross Perot (I) played a significant role in this upset.',
    'At the turn of the millenium, Texas Governor George W. Bush (R) won the electoral college while losing the popular vote. Al Gore (D) pushed for a recount, but the Supreme Court interceded and declared Bush the winner.',
    'Heading into the The Great Recession, Barack Obama (D) became the first African American elected to the Presidency. Discontent with the War in Iraq and along with the economic woes were some of the primary driving forces helping the Democratic candidate.',
    'In one of the biggest upset in recent history, Hillary Clinton (D) was defeated by Donald Trump (R), though she won the popular vote. Virtually all polls had Clinton winning handily.',
    'In the midst of COVID-19 and social unrest, former Vice President Joe Biden (D) was elected President.'
];

var ln_data = [
    {year: 1972, party: "Democratic", vote_perc: 98.5},
    {year: 1972, party: "Republican", vote_perc: 98.5}
];

var margin = {top: 10, right: 30, bottom: 30, left: 60},
    width = 600 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;
    
var st_svg = d3.select(".states_viz")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");
    
var ln_svg = d3.select(".line_viz")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");

var pres_data = d3.csv("1976-2020-president.csv", function(d) {return d;})

console.log(pres_data);
    
d3.csv("https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/3_TwoNumOrdered_comma.csv",

  // When reading the csv, I must format variables:
  function(d){
    return { date : d3.timeParse("%Y-%m-%d")(d.date), value : d.value }
  },

  // Now I can use this dataset:
  function(data) {

    // Add X axis --> it is a date format
    var x = d3.scaleTime()
      .domain(d3.extent(data, function(d) { return d.date; }))
      .range([ 0, width ]);
    st_svg.append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x));

    // Add Y axis
    var y = d3.scaleLinear()
      .domain([0, d3.max(data, function(d) { return +d.value; })])
      .range([ height, 0 ]);
    st_svg.append("g")
      .call(d3.axisLeft(y));

    // Add the line
    st_svg.append("path")
      .datum(data)
      .attr("fill", "none")
      .attr("stroke", "steelblue")
      .attr("stroke-width", 1.5)
      .attr("d", d3.line()
        .x(function(d) { return x(d.date) })
        .y(function(d) { return y(d.value) })
        )

      // Add X axis --> it is a date format
    var x = d3.scaleTime()
      .domain(d3.extent(data, function(d) { return d.date; }))
      .range([ 0, width ]);
    ln_svg.append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x));

    // Add Y axis
    var y = d3.scaleLinear()
      .domain([0, d3.max(data, function(d) { return +d.value; })])
      .range([ height, 0 ]);
    ln_svg.append("g")
      .call(d3.axisLeft(y));

    // Add the line
    ln_svg.append("path")
      .datum(data)
      .attr("fill", "none")
      .attr("stroke", "steelblue")
      .attr("stroke-width", 1.5)
      .attr("d", d3.line()
        .x(function(d) { return x(d.date) })
        .y(function(d) { return y(d.value) })
        )

})

function update(ind) {
    consol.log(yr_data[ind]);

    d3.select("#desc_viz")
        .text(desc_data[ind]);
    
}

update(0)
  
</script>
